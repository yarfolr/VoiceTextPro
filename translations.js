// Translations for the UI
const translations = {
	zh: {
		welcome: '轻松将语音转换为文字。',
		features: '功能包括实时波形可视化、多语言支持和智能设备处理。',
		demo: '欢迎！这是使用浏览器Web Speech API的客户端语音识别演示。尝试使用麦克风进行实时录音，上传音频文件进行播放和转录，或者将文本粘贴到编辑器中。',
		bestResults:
			'为获得最佳效果，请使用Chrome/Chromium并在提示时允许使用麦克风。',
		langSelect: '选择界面语言',
		letsStart: '开始使用',
		back: '返回',
		settings: '设置',
		history: '历史记录',
		help: '帮助',
		microphone: '麦克风',
		uploadAudio: '上传音频',
		voiceRecognition: '语音识别',
		ready: '就绪',
		listening: '正在监听...',
		noSpeech: '未检测到语音',
		networkError: '网络错误 - 请检查您的连接',
		micDenied: '麦克风访问被拒绝',
		start: '开始录音',
		stop: '停止',
		pause: '暂停',
		resume: '继续',
		noiseLevel: '噪音级别',
		confidence: '置信度',
		result: '结果',
		download: '下载.txt',
		copy: '复制',
		transcribe: '转录音频',
		clearHistory: '清除历史记录',
		theme: '主题',
		dark: '暗色',
		light: '亮色',
		autoSave: '自动保存转录',
		interfaceLanguage: '界面语言',
		recognitionLanguage: '识别语言',
	},
	es: {
		welcome: 'Transforma tu voz en texto sin esfuerzo.',
		features:
			'Incluye visualización de forma de onda en vivo, soporte multilingüe y gestión inteligente de dispositivos.',
		demo: '¡Bienvenido! Esta es una demostración de reconocimiento de voz del lado del cliente usando la API Web Speech del navegador. Prueba la grabación en vivo del micrófono, sube archivos de audio para reproducir y transcribir mientras se reproducen.',
		bestResults:
			'Para obtener mejores resultados, usa Chrome/Chromium y permite el acceso al micrófono cuando se te solicite.',
		langSelect: 'Seleccionar idioma de interfaz',
		letsStart: 'Comenzar',
		back: 'Atrás',
		settings: 'Configuración',
		history: 'Historial',
		help: 'Ayuda',
		microphone: 'Micrófono',
		uploadAudio: 'Subir audio',
		voiceRecognition: 'Reconocimiento de voz',
		ready: 'Listo',
		listening: 'Escuchando...',
		noSpeech: 'No se detectó voz',
		networkError: 'Error de red - comprueba tu conexión',
		micDenied: 'Acceso al micrófono denegado',
		start: 'Iniciar grabación',
		stop: 'Detener',
		pause: 'Pausar',
		resume: 'Reanudar',
		noiseLevel: 'Nivel de ruido',
		confidence: 'Confianza',
		result: 'Resultado',
		download: 'Descargar .txt',
		copy: 'Copiar',
		transcribe: 'Transcribir audio',
		clearHistory: 'Borrar historial',
		theme: 'Tema',
		dark: 'Oscuro',
		light: 'Claro',
		autoSave: 'Auto-guardar transcripciones',
		interfaceLanguage: 'Idioma de interfaz',
		recognitionLanguage: 'Idioma de reconocimiento',
	},
	en: {
		welcome: 'Transform your voice into text effortlessly.',
		features:
			'Features live waveform visualization, multi-language support, and smart device handling.',
		demo: "Welcome! This demo showcases client-side speech recognition using the browser's Web Speech API. Try the live microphone recording, upload audio files to playback and transcribe while playing, or paste text to the editor.",
		bestResults:
			'For best results use Chrome/Chromium and allow microphone access when prompted.',
		langSelect: 'Select Interface Language',
		letsStart: "Let's Start",
		back: 'Back',
		settings: 'Settings',
		history: 'History',
		help: 'Help',
		microphone: 'Microphone',
		uploadAudio: 'Upload Audio',
		voiceRecognition: 'Voice Recognition',
		ready: 'Ready',
		listening: 'Listening...',
		noSpeech: 'No speech detected',
		networkError: 'Network error - check your connection',
		micDenied: 'Microphone access denied',
		start: 'Start Recording',
		stop: 'Stop',
		pause: 'Pause',
		resume: 'Resume',
		noiseLevel: 'Noise Level',
		confidence: 'Confidence',
		result: 'Result',
		download: 'Download .txt',
		copy: 'Copy',
		transcribe: 'Transcribe Audio',
		clearHistory: 'Clear History',
		theme: 'Theme',
		dark: 'Dark',
		light: 'Light',
		autoSave: 'Auto-save transcriptions',
		interfaceLanguage: 'Interface Language',
		recognitionLanguage: 'Recognition Language',
	},
	uk: {
		welcome: 'Перетворіть свій голос у текст без зусиль.',
		features:
			'Включає візуалізацію звукової хвилі, підтримку багатьох мов та розумне керування пристроями.',
		demo: 'Вітаємо! Це демонстрація розпізнавання мовлення на стороні клієнта за допомогою Web Speech API браузера. Спробуйте запис через мікрофон, завантажте аудіофайли для відтворення та транскрибації під час відтворення.',
		bestResults:
			"Для найкращих результатів використовуйте Chrome/Chromium та дозвольте доступ до мікрофона, коли з'явиться запит.",
		langSelect: 'Оберіть мову інтерфейсу',
		letsStart: 'Почати',
		back: 'Назад',
		settings: 'Налаштування',
		history: 'Історія',
		help: 'Довідка',
		microphone: 'Мікрофон',
		uploadAudio: 'Завантажити аудіо',
		voiceRecognition: 'Розпізнавання голосу',
		ready: 'Готово',
		listening: 'Слухаю...',
		noSpeech: 'Мовлення не виявлено',
		networkError: "Помилка мережі - перевірте з'єднання",
		micDenied: 'Доступ до мікрофона заборонено',
		start: 'Почати запис',
		stop: 'Стоп',
		pause: 'Пауза',
		resume: 'Продовжити',
		noiseLevel: 'Рівень шуму',
		confidence: 'Точність',
		result: 'Результат',
		download: 'Завантажити .txt',
		copy: 'Копіювати',
		transcribe: 'Транскрибувати аудіо',
		clearHistory: 'Очистити історію',
		theme: 'Тема',
		dark: 'Темна',
		light: 'Світла',
		autoSave: 'Автозбереження транскрипцій',
		interfaceLanguage: 'Мова інтерфейсу',
		recognitionLanguage: 'Мова розпізнавання',
	},
	ru: {
		welcome: 'Преобразуйте свой голос в текст без усилий.',
		features:
			'Включает визуализацию звуковой волны, поддержку многих языков и умное управление устройствами.',
		demo: 'Добро пожаловать! Это демонстрация распознавания речи на стороне клиента с помощью Web Speech API браузера. Попробуйте запись через микрофон, загрузите аудиофайлы для воспроизведения и транскрибации во время воспроизведения.',
		bestResults:
			'Для наилучших результатов используйте Chrome/Chromium и разрешите доступ к микрофону, когда появится запрос.',
		langSelect: 'Выберите язык интерфейса',
		letsStart: 'Начать',
		back: 'Назад',
		settings: 'Настройки',
		history: 'История',
		help: 'Справка',
		microphone: 'Микрофон',
		uploadAudio: 'Загрузить аудио',
		voiceRecognition: 'Распознавание голоса',
		ready: 'Готово',
		listening: 'Слушаю...',
		noSpeech: 'Речь не обнаружена',
		networkError: 'Ошибка сети - проверьте соединение',
		micDenied: 'Доступ к микрофону запрещен',
		start: 'Начать запись',
		stop: 'Стоп',
		pause: 'Пауза',
		resume: 'Продолжить',
		noiseLevel: 'Уровень шума',
		confidence: 'Точность',
		result: 'Результат',
		download: 'Скачать .txt',
		copy: 'Копировать',
		transcribe: 'Транскрибировать аудио',
		clearHistory: 'Очистить историю',
		theme: 'Тема',
		dark: 'Тёмная',
		light: 'Светлая',
		autoSave: 'Автосохранение транскрипций',
		interfaceLanguage: 'Язык интерфейса',
		recognitionLanguage: 'Язык распознавания',
	},
}

// Supported interface languages
const INTERFACE_LANGUAGES = [
	['en', 'English'],
	['es', 'Spanish'],
	['zh', 'Chinese'],
	['ru', 'Russian'],
]

// Recognition languages (this is an extended list of languages supported by Web Speech API)
const RECOGNITION_LANGUAGES = [
	['en-US', 'English (US)'],
	['en-GB', 'English (UK)'],
	['uk-UA', 'Ukrainian'],
	['ru-RU', 'Russian'],
	['es-ES', 'Spanish'],
	['fr-FR', 'French'],
	['de-DE', 'German'],
	['it-IT', 'Italian'],
	['pt-PT', 'Portuguese'],
	['pl-PL', 'Polish'],
	['nl-NL', 'Dutch'],
	['ja-JP', 'Japanese'],
	['ko-KR', 'Korean'],
	['zh-CN', 'Chinese (Simplified)'],
	['zh-TW', 'Chinese (Traditional)'],
	['ar-SA', 'Arabic'],
	['hi-IN', 'Hindi'],
	['tr-TR', 'Turkish'],
	['vi-VN', 'Vietnamese'],
]

// Default language for interface
const DEFAULT_INTERFACE_LANGUAGE = 'en'

// Language utilities
function getBrowserLanguage() {
	const lang = navigator.language || navigator.userLanguage
	const shortLang = lang.split('-')[0]

	// Check if we support the full locale first
	if (translations[lang]) return lang

	// Then check if we support the language part
	if (translations[shortLang]) return shortLang

	// Default to English if we don't support the browser language
	return DEFAULT_INTERFACE_LANGUAGE
}

function getTranslation(key, lang = getCurrentInterfaceLanguage()) {
	return (
		translations[lang]?.[key] ||
		translations[DEFAULT_INTERFACE_LANGUAGE][key] ||
		key
	)
}

function getCurrentInterfaceLanguage() {
	return localStorage.getItem('interfaceLanguage') || getBrowserLanguage()
}

function setInterfaceLanguage(lang) {
	if (translations[lang]) {
		localStorage.setItem('interfaceLanguage', lang)
		return true
	}
	return false
}

// Export for use in main app
window.Translations = {
	getTranslation,
	getCurrentInterfaceLanguage,
	setInterfaceLanguage,
	INTERFACE_LANGUAGES,
	RECOGNITION_LANGUAGES,
}
